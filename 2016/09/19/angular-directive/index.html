<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      angular-directive | The Girl King 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="John Doe">
    
    

    <meta name="description" content="指令就是一些附加在HTML元素上的自定义标记（例如：属性，元素，或css类），它告诉AngularJS的HTML编译器 ($compile) 在元素上附加某些指定的行为，甚至操作DOM、改变DOM元素，以及它的各级子节点。
Angular内置了一整套指令，如ngBind, ngModel, 和ngView。 就像你可以创建控制器和服务那样，你也可以创建自己的指令来让Angular使用。 当Angu">
<meta property="og:type" content="article">
<meta property="og:title" content="angular-directive | The Girl King">
<meta property="og:url" content="http://yoursite.com/2016/09/19/angular-directive/index.html">
<meta property="og:site_name" content="The Girl King">
<meta property="og:description" content="指令就是一些附加在HTML元素上的自定义标记（例如：属性，元素，或css类），它告诉AngularJS的HTML编译器 ($compile) 在元素上附加某些指定的行为，甚至操作DOM、改变DOM元素，以及它的各级子节点。
Angular内置了一整套指令，如ngBind, ngModel, 和ngView。 就像你可以创建控制器和服务那样，你也可以创建自己的指令来让Angular使用。 当Angu">
<meta property="og:image" content="http://yoursite.com/../../public/images/angular-directive/directive-templateUrl.png">
<meta property="og:updated_time" content="2016-09-19T15:37:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="angular-directive | The Girl King">
<meta name="twitter:description" content="指令就是一些附加在HTML元素上的自定义标记（例如：属性，元素，或css类），它告诉AngularJS的HTML编译器 ($compile) 在元素上附加某些指定的行为，甚至操作DOM、改变DOM元素，以及它的各级子节点。
Angular内置了一整套指令，如ngBind, ngModel, 和ngView。 就像你可以创建控制器和服务那样，你也可以创建自己的指令来让Angular使用。 当Angu">
<meta name="twitter:image" content="http://yoursite.com/../../public/images/angular-directive/directive-templateUrl.png">
    
    
    
      <link rel="icon" type="image/x-icon" href="/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">The Girl King</a></h1>
        <hr class="panel-cover__divider" />

        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">Home</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">Archive</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">About</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">angular-directive</h1>

    

    <div class="post-meta">
      <time datetime="2016-09-19" class="post-meta__date date">2016-09-19</time> 

      <span class="post-meta__tags tags">

          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/Tech-AngularJS/">Tech - AngularJS</a>
            </font>
          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <p><a href="https://docs.angularjs.org/guide/directive" target="_blank" rel="external">指令</a>就是一些附加在HTML元素上的自定义标记（例如：属性，元素，或css类），它告诉AngularJS的HTML编译器 ($compile) 在元素上附加某些指定的行为，甚至操作DOM、改变DOM元素，以及它的各级子节点。</p>
<p>Angular内置了一整套指令，如ngBind, ngModel, 和ngView。 就像你可以创建控制器和服务那样，你也可以创建自己的指令来让Angular使用。 当Angular 启动器引导你的应用程序时， HTML编译器就会遍历整个DOM，以匹配DOM元素里的指令。</p>
<h2 id="Matching-Directives"><a href="#Matching-Directives" class="headerlink" title="Matching Directives"></a>Matching Directives</h2><h3 id="Restrict匹配方式"><a href="#Restrict匹配方式" class="headerlink" title="Restrict匹配方式"></a>Restrict匹配方式</h3><ul>
<li><p>E - 匹配元素名称</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;my-directive&gt;&lt;/my-directive&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>A - 匹配属性名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div my-directive=<span class="string">"exp"</span>&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>C - 匹配类名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div class=<span class="string">"my-directive:exp;"</span>&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>M - 注释</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;!-- directive:hello --&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>More Code: <a href="http://codepen.io/DaleDu/pen/ammBgY" target="_blank" rel="external">Demo</a></p>
<h3 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h3><p>当需要创建带有自己的模板的指令时，使用元素名称的方式创建指令</p>
<p>当需要为已有的HTML标签增加功能时，使用属性的方式创建指令</p>
<h2 id="Transclude"><a href="#Transclude" class="headerlink" title="Transclude"></a>Transclude</h2><ul>
<li>transclude使得这个选项的指令，所包含的内容能够访问指令外部的作用域</li>
<li>指令内部嵌套的内容，放到具有ng-transclude的标签中<br>More Code: <a href="http://codepen.io/DaleDu/pen/xEEOBN" target="_blank" rel="external">Demo</a></li>
</ul>
<h2 id="Replace"><a href="#Replace" class="headerlink" title="Replace"></a>Replace</h2><p>More Code: <a href="http://codepen.io/DaleDu/pen/mAAPxa" target="_blank" rel="external">Demo</a></p>
<h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><p>当你有大量代表客户信息的模板。这个模板在你的代码中重复了很多次，当你改变一个地方的时候， 你不得不在其他地方同时改动，这时候，你就要使用指令来简化你的模板。</p>
<h3 id="template"><a href="#template" class="headerlink" title="template"></a>template</h3><p>More Code: <a href="http://codepen.io/DaleDu/pen/NRRjBW" target="_blank" rel="external">Demo</a></p>
<h3 id="templateUrl"><a href="#templateUrl" class="headerlink" title="templateUrl"></a>templateUrl</h3><p><img src="../../public/images/angular-directive/directive-templateUrl.png" alt=""></p>
<h3 id="templateCache"><a href="#templateCache" class="headerlink" title="templateCache"></a>templateCache</h3><ul>
<li><a href="https://docs.angularjs.org/api/ng" target="_blank" rel="external">ng</a>模块中的服务</li>
</ul>
<p>在模板第一次被引用时,它会被载入到模板缓存中以便快速的检索。你可以直接使用一个script标签来添加一个<br>模板，或者直接通过 $templateCache 服务来达到相同的效果。</p>
<p>【Set】通过 script 标签添加:<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/ng-template"</span> id=<span class="string">"templateId.html"</span>&gt;</div><div class="line">&lt;p&gt;This is the content of the template&lt;/p&gt;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>【Set】通过 $templateCache 服务添加:<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var myApp = angular.module(<span class="string">'myApp'</span>, []);</div><div class="line">myApp.run(<span class="keyword">function</span>(<span class="variable">$templateCache</span>) &#123;</div><div class="line"><span class="variable">$templateCache</span>.put(<span class="string">'templateId.html'</span>, <span class="string">'This is the content of the template'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>【Get】通过 component 得到:<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">myApp.component(<span class="string">'myComponent'</span>, &#123;</div><div class="line">template: <span class="string">'templateId.html'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>【Get】通过 Javascript 得到:<br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$templateCache</span>.get(<span class="string">'templateId.html'</span>)</div></pre></td></tr></table></figure></p>
<h2 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h2><h3 id="隔离作用域"><a href="#隔离作用域" class="headerlink" title="隔离作用域"></a>隔离作用域</h3><p>More Code: <a href="http://codepen.io/DaleDu/pen/mAAXZL" target="_blank" rel="external">Demo</a></p>
<h3 id="scope的绑定策略"><a href="#scope的绑定策略" class="headerlink" title="scope的绑定策略"></a>scope的绑定策略</h3><ul>
<li>@ : 字符串</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">把当前属性作为字符串传递</div><div class="line">你还可以绑定来自外层scope的值</div><div class="line">在属性值中插入&#123;&#123;&#125;&#125;</div></pre></td></tr></table></figure>
<ul>
<li>= : 双向绑定</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">与父scope中的属性进行双向绑定</div></pre></td></tr></table></figure>
<ul>
<li>&amp; : 函数</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">传递一个来自父scope的函数，稍后调用</div></pre></td></tr></table></figure>
<h2 id="Interaction-Controller-amp-Directive"><a href="#Interaction-Controller-amp-Directive" class="headerlink" title="Interaction: Controller &amp; Directive"></a>Interaction: Controller &amp; Directive</h2><h2 id="Interaction-Directive-amp-Directive"><a href="#Interaction-Directive-amp-Directive" class="headerlink" title="Interaction: Directive &amp; Directive"></a>Interaction: Directive &amp; Directive</h2><h2 id="Execution-Stage"><a href="#Execution-Stage" class="headerlink" title="Execution Stage"></a>Execution Stage</h2><h5 id="加载阶段"><a href="#加载阶段" class="headerlink" title="加载阶段"></a>加载阶段</h5><blockquote>
<p>加载angular.js，找到ng-app指令，确定应用边界</p>
</blockquote>
<h5 id="编译阶段"><a href="#编译阶段" class="headerlink" title="编译阶段"></a>编译阶段</h5><blockquote>
<ul>
<li>遍历DOM，找到所有指令</li>
<li>根据指令代码中的template、replace、transclude转换DOM结构</li>
<li>如果存在compile函数则调用</li>
</ul>
</blockquote>
<h5 id="链接阶段"><a href="#链接阶段" class="headerlink" title="链接阶段"></a>链接阶段</h5><blockquote>
<ul>
<li>对每条指令运行link函数</li>
<li>link函数一般用来操作DOM、绑定事件监听器</li>
</ul>
</blockquote>
<p>参考文档</p>
<p><a href="docs.angularjs.org/guide/directive">Directive AngularJS官网</a></p>
<p><a href="http://docs.ngnice.com/guide/directive" target="_blank" rel="external">Directive AngularJS中文网</a></p>

  </section>

  
  
</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2016-2018. | About Me  <a href="http://weibo.com/daledu">DaleDu</a> | The Girl Behind</span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    
    
    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
